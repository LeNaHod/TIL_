SQLD_TIL DAY01(22_10_01)

# 데이터모델링에 대해 알아보자

- 데이터 모델링이란?
  업무정보를 구성하는 기초가 되는 정보들을 일정한 표기법에 의해 표현하는것
  정보구축의 대상이 되는 업무 내용을 **정확**하게 분석하는것
  분석된 모델을 가지고 실제 데이터베이스를 생성하여 개발 및 관리를한다.

  = 즉 DB구축하기위함에만 사용하는게아니라, 자체가 업무분석,설명하는데 매우중요한 역할을하는것이다.
    **분석된 모델을 가지고 DB를생성** / 개발 및 관리가 되고 분석 업무가 가능한것

- 데이터 모델링의 유의점
    1. 중복 : 중복 가능성 ↓ , 여러 DB에 중복 정보를 저장 X
    2. 비유연성 :  데이터 정의 프로세스와 사용 프로세스를 분리한다.
    3. 비일관성 : 데이터간의 상호 연관관계를 명확하게 정의 ,일관성 있게 데이터를 유지한다.

-  데이터 모델링의 종류
    1. 개념데이터 모델링 : 추상수준이 높고,전사적 데이터 모델링이다. EA수립에 이용 多, 업무중심적이고 포괄적이다.
    2. 논리적 데이터 모델링 : 시스템으로 구축하고자하는 업무에 대해 Key,속성,관계 등을 정확하게 표현. **재사용성**이높다.
    3. 물리적 데이터 모델링 : 정말 물리적인 성격을 고려해서 설계하는것.(DB에 이식할 수 있도록 성능,저장 등 물리적인것)

## 스키마와 스키마 구조

- 스키마란?
    데이터베이스의 자료의 구조나, 제약조건, 표현방법, 자료간의 관계 등을 전반적인 명세를 기술한것

- 스키마의 구조 3단계
    1. 외부스키마 : 사용자 정의 뷰. =서브 스키마 라고도 불림. 같은 데이터베이스에 대해서도 서로 다른 관점을 정의할수있다.
    2. 개념 스키마 : 전체적 뷰. 모든 사용자 관점을 통합한 조직 전체 관점의 통합적 표현이라고 볼수있다. 관계를 표현한다.
    3. 내부 스키마 : 저장 스키마. 물리적 저장장치의 입장에서 보는것이다. 레코드의 물리적인 구조를 정의, 저장 데이터의 항목 표현방법, 레코드의 물리적 순서를 나타낸다. 설계자나 프로그래머 시점으로 생각할수있다.
   

## ERD의 작성순서
- ERD는 Entity Realtionship Model 의 약자로 76년 피터첸이만들었다.

- 순서로는
    1. 엔터티를 도출한다(그린다)
    2. 배치한다
    3. 관계를 설정한다
    4. 관계명을 기술한다
    5. 관계 참여도를 기술한다.
    6. 필수여부를 기술한다
중요한건 ERD는 **배치방법은 상관없다.** 다만, 엔터티 배치를 가독성있게 하는것이 좋다.

## 엔터티에 대해 알아보자!

- 엔터티란?
    가장 기본적인 값(부품, 고객정보, 위치 등) 업무에 필요한 정보를 관리하기위한 **인스턴스**의 **집합**이다.
    크게 3가지 종류로 나뉘는데

    1. 유형 : 지속적인 활용,물리적 형태가있다(교수,강의실 ,학생 등이 여기서 속함)
    2. 개념 : 물리적 형태 X, But 관리할 개념적 정보(수업,보험상품)
    3. 사건 : 업무 수행중 발생. 발생량이 굉장히 많다.주로 통계자료에 활용한다.
         

- 발생 시점에 따른 엔터티 분류
    1. 기본 : Key같은 개념. 다른 엔터티에게 **상속받지않고 독립적인 엔터티이다. 주 고유식별자 O**
    2. 중심 : 기본과 행위 엔터티 중간의 엔터티
    3. 행위 : **2개이상의 부모엔터티** 로부터 발생한다. 데이터의 양이 가장 많다.


## 엔터티와 인스턴스, 속성과 속성값

인스턴스를 알기 전에, 인스턴스와 데이터베이스,테이블 스페이스에 대해 간단하게 알아보자

- 인스턴스란?
    사용자가 DB에 접근하여 호출,실행 하여 트랜잭션을 처리할수있는 프로세스와 메모리영역이다.
    SGA(시스템 글로벌영역)+프로세스 가 합쳐진것인데, 쉽게 **실제 작업이 이루어지는 곳**  이라고 생각할수 있다.
    사용자는 반드시 인스턴스를 통해 DB(데이터 베이스)에 접근이 가능하다!
    
    > DB의 내용 -> 인스턴스에 올림 -> 트랜잭션 처리 -> 다시 DB에 저장

- 테이블 스페이스 
   DB에 실제 저장하는 단위중 가장 상위의 개념(=가장 큰 단위)

   블록 -> 익스텐트 -> 세그먼트 -> 테이블 스페이스(=org,dbf) 

   최소<---------------------------------------------------->최대

- 데이터 베이스
   실제 데이터들이 저장되는 물리적인 공간이다.

- 엔터티-인스턴스-속성-속성값을 알아보자
>![image](https://t1.daumcdn.net/cfile/tistory/99F8F34A5C9744C002)

위 그림을 보면 엔터티와 인스턴스의 관계를 알수있다. 엔터티는 인스턴스의 집합,
인스턴스는 속성의 집합이다. 속성은 하나의 속성값만 가질수있다.(전체적으로 엔터티 =테이블/인스턴스=행,속성=열,속성값=제약조건,타입 같은느낌이다.)

### 속성과 속성값을 좀 더 알아보자
속성은 인스턴스에서 관리하는 **더이상 분리되지않는 최소의 데이터 단위**이고, **속성값은 하나당 한개밖에 가지지못한다.** 만약 속성값이 여러개가 와야하는 경우, 1차정규화를 하거나, 별도의 엔터티를 이용해서 분리해야한다.
또, 유일한 식별자에 함수적 종속성을 가져야한다(=유일한 식별자(depetno)로 사원 전체의 속성을 가져오는것과 같다.)
- 속성의 종류
   1. 기본 : **원래가지고 있어야하는 속성**. 설계와 파생을 제외한 모든것이 기본에 속함
   2. 설계 : 업무를 규칙화하기위해 속성을 새로 정의하는 속성. 일련번호같은게 설계에속한다.
   3. 파생 : 기본속성들을 계산하여 저장할수있도록 만든 속성이다. 조회시 성능이빠르다.

- 도메인
도메인은 **속성값을 가질수있는 범위**이다.(=데이터 타입,제약조건 같은것들)

- 속성의 명칭 부여시 유의할점  = **엔터티의 명칭부여시에도 적용된다.**
  1. 가급적 해당 업무에서 사용하는 이름을 부여한다.
  2. 약어를 이름으로 설정하지말자.
  3. 서술식 속성명을 사용하지말자.
  4. 전체 데이터모델에서 유일성을 확보하자(겹치지말자)

- ERD관계구분,UML관계구분
  
  **<span style="color:red">ERD</span>는 관계를 구분하지않음**  But  **<span style="color:red">UML</span>는 실선과 점선으로 구분한다.** 
  
  어떤관계를 구분하느냐?

  ERD:존재적 관계/행위에 의한 관계
  UML:저 위의 두개를 연관관계 / 의존관계 로 표현한다.

- 관계표기법 세가지
  1. 관계명 : 관계이름
  2. 관계차수 : 1:1,1:M
  3. 선택성(선택사양) : 둘이 필수관계인지 선택관계인지 

- 관계체크사항 네가지
    1. 두개의 엔터티 관계사이에 연관규칙이이있는가?(=연관성이있는가)
    2. 정보의 조합이 발생하는가?
    3. 기슬서,장표에 관계연결에 대한 규칙이 서술되어있는가?
    4. 기술서,장표에 관계연결을 가능하게하는 **동사**가있는가? (명사 절대아님)
   
## 식별자
식별자란 하나의 엔티티 내에서 각각의 인스턴스를 유일하게 구분해 낼 수 있는 속성,또는 속성 그룹을 말하며, 하나의 엔티티는 하나 이상의 식별자를 반드시 보유하고 있어야만 한다. = 중복 데이터가없는 속성을 의미한다.

Key와 비슷한 느낌인데 **Key**는 **물리적 데이터 모델링단계**이고, **식별자**는 **논리적 데이터 모델링단계**에서 사용한다.

- 식별자의  특징

- 주식별자에 의해 엔티티 내에 모든 인스턴스들이 유일하게 구분되어야 한다.
- 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 한다.
- 지정된 주식별자의 값은 자주 변하지 않는 것이어야 한다.
- 주식별자가 지정이 되면 반드시 값이 들어와야 한다.
  
> 주식별자는 **유일성**이 보장되어야하기때문에, **이름**같이 중복될 수 있는것들은 주 식별자가 될 수 없다.
> 자주 쓰이는 속성을 주식별자로 정하고, 복합으로 구성할 경우 너무 많은 속성이 포함되지 않도록 한다.

- 식별자의 분류


  ![image](https://dataonair.or.kr/publishing/img/knowledge/SQL_051.jpg)


위는 식별자의 분류표이다. 
주 식별자와 보조식별자의 차이는 대표성의차이이고
내/외부는  생성되는 위치. 외부식별자=참조키 foreign key
속성의 수는 말그대로 속성의 수 차이.
대체여부는 업무에 의해 만들어졌느냐/인위적으로 만들어졌느냐의 차이이다.

- 식별자와 비식별자의 관계

식별자관계(Identifying Relationship): 자식엔티티의 주식별자로 부모의 주식별자가 **상속이 되는 경우**

비식별자관계(Non-Identifying Relationship):부모엔티티로부터 속성을 받았지만 자식엔티티의 주식별자로 사용하지 않고 **일반적인 속성으로만 사용하는 경우** =상속을 받았지만, 안쓰는경우


네가지 경우에 비식별자 관계에 의한 외부속성을 생성한다.
  1. 자식엔티티에서 받은 속성이 반드시 필수가 아니어도 무방하기 때문에 부모 없는 자식이 생성될 수 있는 경우
  2. 엔티티별로 데이터의 생명주기를 다르게 관리할 경우
  3. 여러 개의 엔티티가 하나의 엔티티로 통합되어 표현되었는데 각각의 엔티티가 별도의 관계를 가질 때
  4. 자식엔티티에 주식별자로 사용해도 되지만 자식엔티티에서 별도의 주식별자를 생성하는 것이 더 유리하다고 판단 될 때

